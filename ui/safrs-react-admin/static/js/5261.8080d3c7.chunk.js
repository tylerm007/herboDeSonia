"use strict";(self.webpackChunkreact_admin_upgrade=self.webpackChunkreact_admin_upgrade||[]).push([[5261],{25261:(e,n,t)=>{t.r(n),t.d(n,{ApiAdminHome:()=>W,ApiGenerateField:()=>R,ApiShow:()=>B,ApiUserPasswordTab:()=>C,CreateApiFab:()=>ue,CreateLocation:()=>ce,CustomTab:()=>de,CustomerLabel:()=>ae,DBConnection:()=>U,DownloadProject:()=>ie,EmployeeLabel:()=>re,MyComp:()=>z,Overlay:()=>xe,ProjectLink:()=>se,Running:()=>te,SampleColumnField:()=>oe,UserPasswordField:()=>le,UserPasswordTab:()=>w,showApiFab:()=>he});var s=t(68903),i=t(85865),o=t(94698),r=t(73896),a=t(65043),l=t(85546),d=t(22086),c=t(10510),x=t(44602),h=t(68583),u=t(70579),p=t(11906),j=t(81e3),g=t(67784),m=t(53193),A=t(76738),v=t(46349),y=t(78074),b=t(4611);const w=()=>{const e=(0,y.wy)(),n=(0,b.l)(),t=(0,l.i)(),[o,r]=((0,A.L)(),(0,a.useState)("")),[d,c]=(0,a.useState)(""),[x,h]=(0,a.useState)("secondary");return(0,u.jsx)(j.A,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off",children:(0,u.jsxs)(m.A,{children:[(0,u.jsx)(s.Ay,{item:!0,xs:12,spacing:4,children:(0,u.jsx)(i.A,{variant:"body2",component:"p",children:(0,u.jsx)("b",{children:"Change the user password"})})}),(0,u.jsx)(s.Ay,{item:!0,xs:12,spacing:4,children:(0,u.jsx)(g.A,{id:"outlined-password-input",label:"New Password",type:"password",onChange:e=>{let n=e.target.value;r(n),h(n===d&&n.length>5?"primary":"secondary")}})}),(0,u.jsx)(s.Ay,{item:!0,xs:12,spacing:4,children:(0,u.jsx)(g.A,{id:"outlined-password-input",label:"Repeat Password",type:"password",onChange:e=>{let n=e.target.value;c(n),h(o===n&&o.length>5?"primary":"secondary")}})}),(0,u.jsx)(s.Ay,{item:!0,xs:12,spacing:4,children:(0,u.jsx)(p.A,{variant:"contained",color:x,onClick:()=>{if(o!==d)return void n("Passwords don't match",{type:"warning"});if(o.length<6)return void n("Password too short",{type:"warning"});const s={password:o};(0,v.s9)("".concat(e.api_root,"/Users/").concat(null===t||void 0===t?void 0:t.id,"/change_password"),{method:"POST",body:JSON.stringify(s)}).then((()=>n("Password Changed!"))).catch((()=>n("Error Changing Password",{type:"warning"})))},children:"Submit"})})]})})},C=()=>{const e=(0,y.wy)(),n=(0,b.l)(),t=(0,l.i)(),[o,r]=((0,A.L)(),(0,a.useState)("")),[d,c]=(0,a.useState)(""),[x,h]=(0,a.useState)(""),[w,C]=(0,a.useState)("secondary");return(0,u.jsx)(j.A,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off",children:(0,u.jsxs)(m.A,{children:[(0,u.jsx)(s.Ay,{item:!0,xs:12,spacing:4,component:"div",children:(0,u.jsx)(i.A,{variant:"body2",component:"p",children:(0,u.jsx)("b",{children:"Current user password"})})}),(0,u.jsx)(s.Ay,{item:!0,xs:12,spacing:4,component:"div",children:(0,u.jsx)(g.A,{id:"outlined-password-input",label:"Current Password",type:"password",onChange:e=>{let n=e.target.value;r(n),C(n===x&&n.length>5?"primary":"secondary")}})}),(0,u.jsx)(s.Ay,{item:!0,xs:12,spacing:4,component:"div",children:(0,u.jsx)(i.A,{variant:"body2",component:"p",children:(0,u.jsx)("b",{children:"New user password"})})}),(0,u.jsx)(s.Ay,{item:!0,xs:12,spacing:4,component:"div",children:(0,u.jsx)(g.A,{id:"outlined-password-input",label:"New Password",type:"password",onChange:e=>{let n=e.target.value;c(n),C(n===x&&n.length>5?"primary":"secondary")}})}),(0,u.jsx)(s.Ay,{item:!0,xs:12,spacing:4,component:"div",children:(0,u.jsx)(g.A,{id:"outlined-password-input",label:"Repeat Password",type:"password",onChange:e=>{let n=e.target.value;h(n),C(d===n&&d.length>5?"primary":"secondary")}})}),(0,u.jsx)(s.Ay,{item:!0,xs:12,spacing:4,component:"div",children:(0,u.jsx)(p.A,{variant:"contained",color:w,onClick:()=>{if(d!==x)return void n("Passwords don't match",{type:"warning"});if(d.length<1)return void n("Password too short",{type:"warning"});const s={password:d};(0,v.s9)("".concat(e.api_root,"/Users/").concat(null===t||void 0===t?void 0:t.id,"/change_password"),{method:"POST",body:JSON.stringify(s)}).then((()=>n("Password Changed!"))).catch((()=>n("Error Changing Password",{type:"warning"})))},children:"Submit"})})]})})};var f=t(1243),S=t(51292),P=t(78492),k=t(74605),F=t(14256),_=t(87014),T=t(88027),N=t(1455),O=t(57767),M=t(75037);const L={box:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"75%",bgcolor:"background.paper",border:"0px solid #000",boxShadow:24,p:4,textAlign:"left"},modal:{position:"absolute",top:"10%",left:"10%",overflow:"scroll",height:"100%",fontWeight:600,display:"flex"},joinedField:{cursor:"pointer",color:"#3f51b5"},dbBtn:{height:"80%",position:"relative",top:"50%",transform:"translateY(-50%)"},dbGrid:{"& .MuiTextField-root":{borderBottom:"4px solid white",paddingBottom:"1em",paddingRight:"1em"}},actions:{textAlign:"center","& button":{width:"99%"}},connStr:{backgroundColor:"#ccc",fontFamily:"Consolas"}},D=async(e,n,t)=>{const s={...{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("auth_token"))},body:JSON.stringify(n||{})},...t};return(await fetch(e,s)).json()},I=e=>{let{record:n}=e;const[t,s]=a.useState(null),[o,r]=a.useState(!1),[l,d]=a.useState(L.box),c=(0,y.wy)();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("span",{onClick:e=>{r(!0),e.stopPropagation()},style:L.joinedField,title:"Relationship",children:(0,u.jsx)(_.A,{})}),(0,u.jsx)(f.A,{sx:L.modal,open:o,onClose:e=>{e.stopPropagation(),r(!1)},"aria-labelledby":"modal-title","aria-describedby":"modal-description",children:(0,u.jsxs)(j.A,{sx:l,children:[(0,u.jsx)(i.A,{id:"modal-title",variant:"h6",children:"Create API"}),"Pressing the button will generate an API with the following properties:",(0,u.jsxs)("dl",{children:[(0,u.jsx)("dt",{children:"Name:"}),(0,u.jsx)("dd",{children:null===n||void 0===n?void 0:n.name}),(0,u.jsx)("dt",{children:"Database URL:"}),(0,u.jsx)("dd",{children:null===n||void 0===n?void 0:n.connection_string}),(0,u.jsx)("dt",{children:"Port:"}),(0,u.jsx)("dd",{children:null===n||void 0===n?void 0:n.port}),(0,u.jsx)("dt",{children:"Hostname:"}),(0,u.jsx)("dd",{children:null===n||void 0===n?void 0:n.hostname})]}),(0,u.jsxs)(p.A,{variant:"outlined",onClick:()=>(async e=>{const n="".concat(c.api_root,"/Apis/").concat(null===e||void 0===e?void 0:e.id,"/generate");s((0,u.jsx)(T.R,{})),d((e=>({...e,top:"90%"})));const t=await D(n);s((0,u.jsx)("pre",{children:JSON.stringify(t,null,2)}))})(n),children:["Start ",(0,u.jsx)(_.A,{})]}),(0,u.jsx)("hr",{}),t]})})]})},R=e=>"list"===e.mode?(0,u.jsx)(I,{...e}):null,B=e=>(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{children:"xxxx"}),(0,u.jsx)(I,{...e}),e.show]}),q=e=>{const n=(0,M.mN)(),t=(0,l.i)(),[o,r]=a.useState(!1),[d,c]=a.useState((null===t||void 0===t?void 0:t.connection_string)||""),[x,h]=a.useState("user"),[A,v]=a.useState("pass"),[b,w]=a.useState("dbhost"),[C,_]=a.useState("dbname"),[O,I]=a.useState("Other"),[R,B]=a.useState(null),q=(0,y.wy)(),U=()=>"Other"===O?d:"sqlite"===O?"".concat(O,"://").concat(C):"".concat(O,"://").concat(x,":").concat(A,"@").concat(b,"/").concat(C);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(s.Ay,{container:!0,spacing:4,children:[(0,u.jsx)(s.Ay,{item:!0,xs:4,children:(0,u.jsx)(N.k,{source:"connection_string",defaultValue:U(),helperText:"SQLAlchemy connection string syntax",fullWidth:!0})}),(0,u.jsx)(s.Ay,{item:!0,xs:4,children:(0,u.jsx)(p.A,{variant:"outlined",onClick:()=>r(!0),color:"primary",size:"large",sx:L.dbBtn,children:"Configure Connection"})})]}),(0,u.jsx)(f.A,{open:o,onClose:()=>r(!1),sx:L.modal,"aria-labelledby":"modal-title","aria-describedby":"modal-description",children:(0,u.jsx)(j.A,{sx:L.box,children:(0,u.jsxs)(s.Ay,{container:!0,spacing:4,sx:L.dbGrid,children:[(0,u.jsxs)(s.Ay,{item:!0,xs:12,children:[(0,u.jsx)(i.A,{id:"modal-title",variant:"h6",children:"Database Configuration"}),(0,u.jsx)("hr",{})]}),(0,u.jsx)(s.Ay,{item:!0,xs:6,children:(0,u.jsxs)(m.A,{fullWidth:!0,children:[(0,u.jsx)(S.A,{children:"DB Dialect"}),(0,u.jsxs)(P.A,{defaultValue:"Other",name:"radio-buttons-group",onChange:e=>{const n=e.target.value;I(n),"sqlite"===n&&(h(""),v(""),w(""))},children:[(0,u.jsx)(k.A,{value:"mysql+pymysql",control:(0,u.jsx)(F.A,{}),label:"MySQL"}),(0,u.jsx)(k.A,{value:"oracle",control:(0,u.jsx)(F.A,{}),label:"Oracle"}),(0,u.jsx)(k.A,{value:"postgresql",control:(0,u.jsx)(F.A,{}),label:"Postgres"}),(0,u.jsx)(k.A,{value:"sqlite",control:(0,u.jsx)(F.A,{}),label:"SQLite"}),(0,u.jsx)(k.A,{value:"mssql+pyodbc",control:(0,u.jsx)(F.A,{}),label:"SQLServer"}),(0,u.jsx)(k.A,{value:"Other",control:(0,u.jsx)(F.A,{}),label:"Manual:"})]}),(0,u.jsx)(g.A,{label:"Manual",variant:"outlined",fullWidth:!0,value:d,onChange:e=>c(e.target.value),helperText:"Manual connection string configuration"})]})}),(0,u.jsxs)(s.Ay,{item:!0,xs:6,children:[(0,u.jsx)(g.A,{label:"Username",variant:"outlined",value:x,onChange:e=>h(e.target.value)}),(0,u.jsx)(g.A,{label:"Password",variant:"outlined",value:A,onChange:e=>v(e.target.value)}),(0,u.jsx)(g.A,{label:"Database host",variant:"outlined",value:b,onChange:e=>w(e.target.value)}),(0,u.jsx)(g.A,{label:"Database name",variant:"outlined",value:C,onChange:e=>_(e.target.value)})]}),(0,u.jsx)(s.Ay,{item:!0,xs:6,children:(0,u.jsxs)(i.A,{children:["Connection String: ",(0,u.jsx)("span",{style:L.connStr,children:U()})]})}),(0,u.jsxs)(s.Ay,{item:!0,xs:12,sx:L.actions,children:[(0,u.jsx)("hr",{}),(0,u.jsx)(p.A,{variant:"outlined",color:"primary",onClick:()=>(async e=>{const n="".concat(q.api_root,"/Apis/test_conn"),t={connection_string:e};try{const e=await D(n,t);B((0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(i.A,{variant:"h6",children:"Result:"}),(0,u.jsx)("pre",{children:JSON.stringify(e,null,2)})]}))}catch(s){alert("Connection test failed")}})(U()),children:"Test Connection"}),(0,u.jsx)(p.A,{variant:"outlined",color:"primary",onClick:()=>{r(!1),n.change("connection_string",U())},children:"Save & Close"}),(0,u.jsx)(p.A,{variant:"outlined",color:"primary",onClick:async()=>{if(null===t||void 0===t||!t.id)return alert("You must first save the API"),void B("You must first save the API");const e="".concat(q.api_root,"/Apis/").concat(null===t||void 0===t?void 0:t.id,"/generate");B((0,u.jsx)(T.R,{}));try{const n=await D(e);B((0,u.jsx)("pre",{children:JSON.stringify(n,null,2)}))}catch(n){alert("API generation failed")}},disabled:!(null!==t&&void 0!==t&&t.id),title:null!==t&&void 0!==t&&t.id?"":"You must first save the API",children:"Generate API"}),(0,u.jsx)(p.A,{variant:"outlined",color:"primary",onClick:()=>r(!1),children:"Close"})]}),(0,u.jsx)(s.Ay,{item:!0,xs:12,children:R})]})})})]})},U=e=>{const n=(0,l.i)(),t=(null===n||void 0===n?void 0:n.connection_string)||"";return"edit"!==e.mode&&"create"!==e.mode?(0,u.jsx)(i.A,{children:t}):(0,u.jsx)(q,{...e})},J=e=>{let{name:n}=e;const t="/".concat(n,"/api");return(0,u.jsx)(i.A,{children:(0,u.jsx)("a",{href:t,children:t})})},W=()=>{const{data:e}=(0,O.M)("Apis",{pagination:{page:0,perPage:100}}),n=null===e||void 0===e?void 0:e.map((e=>(0,u.jsx)("li",{children:(0,u.jsx)(J,{name:e.name})},e.id)));return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(i.A,{variant:"h6",children:"APIs"}),(0,u.jsx)("ul",{children:n})]})},z=e=>(0,u.jsx)("div",{children:"HMMMM"});var E=t(88446),G=t(17392),H=t(16485),Q=t(19778),V=t(85502),Y=t(22172),X=t(32982);const K={position:"absolute",top:"40%",left:"50%",transform:"translate(-50%, -50%)",width:"fit-content",bgcolor:"background.paper",BorderRadius:"4px",boxShadow:24,p:4,textAlign:"center"},Z={color:"primary.main",border:"0px solid red",borderColor:"primary.main",backgroundColor:"transparent"},$=e=>{let{record:n}=e;const t=n.running,[s,i]=a.useState(!1),o=e=>{e.stopPropagation(),i(!1)};let r=t?(0,u.jsx)(Q.A,{sx:{color:"#39b38a",fontSize:"1.4em"}}):(0,u.jsx)(V.A,{sx:{color:"#444",fontSize:"1.4em"}});return(0,u.jsxs)("div",{children:[(0,u.jsx)(p.A,{variant:"text",sx:Z,onClick:e=>{i(!0),e.stopPropagation()},children:r}),(0,u.jsx)(f.A,{open:s,onClose:o,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:(0,u.jsxs)(j.A,{sx:K,children:[(0,u.jsx)(ee,{}),(0,u.jsx)(p.A,{onClick:o,sx:{mt:2},variant:"outlined",children:"Close Window"})]})})]})},ee=()=>{const e=(0,l.i)(),n=(0,b.l)(),t=(0,Y.b)(),s=null!==e&&void 0!==e&&e.running?"Stop":"Start",[o,{data:r,isPending:a,error:d}]=(0,X.x)("Project",{id:null===e||void 0===e?void 0:e.id,data:{running:!(null!==e&&void 0!==e&&e.running)},previousData:e});return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(i.A,{sx:{mt:2},children:(0,u.jsxs)(p.A,{variant:"outlined",onClick:e=>{e.stopPropagation(),o(),n("".concat(s," app")),setTimeout((()=>{t(),d&&console.error("startstop r:",d)}),2e3)},children:[s," the application"]})})})};var ne=t(41132);const te=()=>{const e=(0,l.i)();return e?(0,u.jsx)(j.A,{sx:{textAlign:"center"},children:(0,u.jsx)(j.A,{sx:{display:"flex",alignItems:"center"},children:(0,u.jsx)($,{record:e})})}):null},se=()=>{const e=(0,l.i)();return e&&e.running?(0,u.jsx)(E.A,{href:e.link,target:"_blank",onClick:e=>e.stopPropagation(),children:(0,u.jsx)(H.A,{sx:{color:"rgb(63, 81, 181)"}})}):null},ie=()=>{const e=(0,l.i)();return e?(0,u.jsx)(E.A,{title:"Download",href:e.download,target:"_blank",onClick:e=>e.stopPropagation(),children:(0,u.jsx)(G.A,{children:(0,u.jsx)(ne.A,{sx:{color:"rgb(63, 81, 181)"}})})}):(0,u.jsx)(u.Fragment,{})},oe=e=>{let{attribute:n}=e;return console.log("attribute: ",n),(0,u.jsx)(o.A,{source:n.name,style:{color:"red"}},n.name)},re=e=>{var n,t;const s=e.instance;return(0,u.jsxs)("div",{children:[" ",null===(n=s.attributes)||void 0===n?void 0:n.FirstName," ",null===(t=s.attributes)||void 0===t?void 0:t.LastName]})},ae=e=>{var n,t;const s=e.instance;return(0,u.jsxs)("div",{children:[" ",(0,u.jsx)("b",{children:null===(n=s.attributes)||void 0===n?void 0:n.CompanyName})," ",(0,u.jsx)("i",{children:null===(t=s.attributes)||void 0===t?void 0:t.ContactName})]})},le=e=>"list"===e.mode?(0,u.jsx)("span",{}):"edit"===e.mode?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(s.Ay,{item:!0,xs:12,spacing:4,children:(0,u.jsx)(i.A,{variant:"h6",component:"h6",children:"Change Password"})}),(0,u.jsxs)(s.Ay,{item:!0,xs:4,spacing:4,children:[(0,u.jsx)(r.y,{source:"_password"})," "]}),(0,u.jsxs)(s.Ay,{item:!0,xs:4,spacing:4,children:[(0,u.jsx)(r.y,{source:"_password"})," "]}),(0,u.jsx)(s.Ay,{item:!0,xs:4,spacing:4})]}):(0,u.jsx)(u.Fragment,{}),de=e=>{(0,l.i)();return(0,u.jsx)("div",{children:"Some Text"})},ce=e=>(console.log("crll",e),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(c.X,{children:(0,u.jsx)(x.T,{attributes:[]})})})),xe=()=>(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("div",{id:"popup-overlay"})}),he=()=>(0,u.jsx)(h.jb,{}),ue=()=>{const e=(0,d.w)();return a.useEffect((()=>{e("/Home")}),[]),(0,u.jsx)(u.Fragment,{})}}}]);
//# sourceMappingURL=5261.8080d3c7.chunk.js.map